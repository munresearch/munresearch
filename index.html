<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

<!DOCTYPE html>
<html>
<head>
  <title>Search Results</title>
</head>
<body>
  <h1>Search Results</h1>
  <form class="form-inline my-2 my-lg-0" action="/searchagenda" method="post">
    <input class="form-control mr-sm-2" aria-label="Enter your agenda" type="text" id="promptagenda" name="promptagenda"><br>
    <input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Submit">
  </form> 
  <table class="table">
   <thead>
    <tr>
      <th>Result 1</th>
      <th>Result 2</th>
      <th>Result 3</th>
      <th>Result 4</th>
      <th>Result 5</th>
      <th>Result 6</th>
    </tr>
   </thead>
   <tbody>
    <tr>
      <td id="result1"></td>
      <td id="result2"></td>
      <td id="result3"></td>
      <td id="result4"></td>
      <td id="result5"></td>
      <td id="result6"></td>
    </tr>
   </tbody>
  </table>
  <script>
    function searchagenda() {
      // Get the search prompt from the form
      var promptagenda = document.getElementById("promptagenda").value;

      // Using the Google Search API to get search results, this key fetches results from Google Scholar
      var url = "https://www.googleapis.com/customsearch/v1?key=AIzaSyD_2AzYp5WRBLkVxoAdPV8r9XBxrtsOe5w&cx=146c71ac6b2fe4aa7&q=" + promptagenda;
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url);
      xhr.send();
      xhr.onload = function() {
        var response = JSON.parse(xhr.response);
        // Update the table with the search results
        document.getElementById("result1").innerHTML = '<a href="'+ response.items[0].link + '">"'+ response.items[0].title + '"</a>';
        document.getElementById("result2").innerHTML = '<a href="'+ response.items[1].link + '">"'+ response.items[1].title + '"</a>';
        document.getElementById("result3").innerHTML = '<a href="'+ response.items[2].link + '">"'+ response.items[2].title + '"</a>';
        document.getElementById("result4").innerHTML = '<a href="'+ response.items[3].link + '">"'+ response.items[3].title + '"</a>';
        document.getElementById("result5").innerHTML = '<a href="'+ response.items[4].link + '">"'+ response.items[4].title + '"</a>';
        document.getElementById("result6").innerHTML = '<a href="'+ response.items[5].link + '">"'+ response.items[5].title + '"</a>';
      }
    }
    // Add an event listener to the form's submit button
    var form = document.querySelector("form");
    form.addEventListener("submit", function(event) {
      event.preventDefault();
      searchagenda();
    });
  </script>
</body>
</html>
